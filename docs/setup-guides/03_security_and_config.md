
# SONiC èŠ‚ç‚¹å®‰å…¨ç»´æŠ¤ä¸Žé…ç½®å¯¼å‡ºå¯¼å…¥

æœ¬æ‰‹å†Œæ—¨åœ¨æŒ‡å¯¼ç”¨æˆ·åœ¨ GNS3 å®žéªŒçŽ¯å¢ƒä¸‹ï¼Œå¦‚ä½•é«˜æ•ˆç®¡ç†è´¦æˆ·å®‰å…¨ã€è¿›è¡Œç³»ç»Ÿçº§ç»´æŠ¤ä»¥åŠå®žçŽ°é…ç½®çš„è·¨å¹³å°å¤‡ä»½ä¸Žæ¢å¤ã€‚

## 1. è´¦æˆ·å®‰å…¨ç®¡ç†

### A. ä¿®æ”¹æœ¬åœ°ç®¡ç†å‘˜å¯†ç 

1. **ä¿®æ”¹å¯†ç **: æ‰§è¡Œ `sudo passwd admin`ã€‚
2. **ç¡®è®¤è¾“å…¥**: æŒ‰ç…§æç¤ºè¾“å…¥å¹¶å†æ¬¡ç¡®è®¤æ–°å¯†ç ã€‚
3. **å…³é”®æŒä¹…åŒ–**: å¿…é¡»æ‰§è¡Œ `sudo config save -y`ï¼Œå¦åˆ™ GNS3 èŠ‚ç‚¹é‡å¯åŽå¯†ç å°†å›žæ»šã€‚

### B. é»˜è®¤å‡­æ®ä¸Ž SSH ä¼˜åŒ–

* **é»˜è®¤å‡­æ®**: `admin` / `YourPaSsWoRd` (æ³¨æ„å¤§å°å†™)ã€‚
* **æŒ‡çº¹æ¸…ç†**: è‹¥æ›´æ¢ç®¡ç† IP åŽæ— æ³•ç™»å½•ï¼Œè¯·åœ¨ Win10 æ‰§è¡Œï¼š`ssh-keygen -R 192.168.100.201`ã€‚

---

## 2. æ ¸å¿ƒç»´æŠ¤æŒ‡ä»¤æ¸…å•

| åŠŸèƒ½åˆ†ç±» | å¸¸ç”¨å‘½ä»¤ | è¯´æ˜Ž |
| --- | --- | --- |
| **æŒä¹…åŒ–** | `sudo config save -y` | å°†å†…å­˜é…ç½®ï¼ˆå« BGPã€IPã€è´¦æˆ·ï¼‰å†™å…¥ç£ç›˜ |
| **ç³»ç»ŸçŠ¶æ€** | `show system-status` | æ£€æŸ¥å„ Docker å®¹å™¨æ˜¯å¦ä¸º **Ready** çŠ¶æ€ |
| **é…ç½®åŠ è½½** | `sudo config reload -y` | å¼ºåˆ¶é‡æ–°åŠ è½½ `config_db.json` ä»¥è¦†ç›–å½“å‰é…ç½® |
| **å†…æ ¸é™é»˜** | `sudo sysctl -w kernel.printk="1 4 1 7"` | ç¦æ­¢å†…æ ¸ Debug ä¿¡æ¯åˆ·å± |

---

## 3. é…ç½®å¤‡ä»½ï¼ˆä»Ž SONiC å¯¼å‡ºåˆ°å®¿ä¸»æœºï¼‰

ä¸ºäº†é˜²æ­¢é¡¹ç›®æŸåï¼Œå»ºè®®å®šæœŸå°†é…ç½®æ–‡ä»¶å¯¼å‡ºåˆ° Win10ã€‚

### A. ä½¿ç”¨ SCP è¿œç¨‹æ‹‰å–é…ç½®

åœ¨ **Win10 å‘½ä»¤è¡Œ**æ‰§è¡Œï¼š

```powershell
# å°†é…ç½®æ–‡ä»¶æ‹‰å–åˆ°å®¿ä¸»æœºå½“å‰ç›®å½•å¹¶é‡å‘½å
scp admin@192.168.100.201:/etc/sonic/config_db.json ./gns3-sonic-1_bak.json

```

### B. æƒé™å—é™å¤„ç†

å¦‚æžœæç¤ºæƒé™ä¸è¶³ï¼Œè¯·å…ˆåœ¨ **SONiC ç»ˆç«¯**æ‰§è¡Œï¼š

```bash
cp /etc/sonic/config_db.json /tmp/config_bak.json
chmod 666 /tmp/config_bak.json
# ç„¶åŽåœ¨ Win10 æ‹‰å– /tmp/config_bak.json å³å¯

```

---

## 4. é…ç½®æ¢å¤ï¼ˆä»Žå®¿ä¸»æœºå¯¼å…¥åˆ° SONiCï¼‰

å½“éœ€è¦è¿˜åŽŸå®žéªŒçŽ¯å¢ƒæˆ–è¿ç§»é…ç½®æ—¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### A. ä¸Šä¼ å¤‡ä»½æ–‡ä»¶

åœ¨ **Win10 å‘½ä»¤è¡Œ**æ‰§è¡Œï¼š

```powershell
# å°†æœ¬åœ°å¤‡ä»½æ–‡ä»¶ä¸Šä¼ è‡³ SONiC ä¸´æ—¶ç›®å½•
scp ./gns3-sonic-1_bak.json admin@192.168.100.201:/tmp/config_db.json

```

### B. åº”ç”¨å¤‡ä»½é…ç½®

åœ¨ **SONiC ç»ˆç«¯**æ‰§è¡Œï¼š

1. **æ›¿æ¢ç³»ç»Ÿæ–‡ä»¶**: `sudo cp /tmp/config_db.json /etc/sonic/config_db.json`
2. **å¼ºåˆ¶ç”Ÿæ•ˆ**: `sudo config reload -y`
* *æ³¨æ„ï¼šè‹¥å¤‡ä»½ä¸­çš„ç®¡ç† IP ä¸Žå½“å‰ä¸åŒï¼ŒSSH è¿žæŽ¥ä¼šæ–­å¼€ï¼Œéœ€æ¢æ–° IP ç™»å½•ã€‚*


3. **æœ€ç»ˆä¿å­˜**: éªŒè¯ä¸šåŠ¡ï¼ˆå¦‚ BGPï¼‰æ¢å¤åŽï¼Œæ‰§è¡Œ `sudo config save -y`ã€‚

---

## 5. æ•…éšœåº”æ€¥ä¸Ž Web UI ç»´æŠ¤é‡‘å¾‹

### A. å¿˜è®°å¯†ç é‡ç½®æµç¨‹

1. **é‡å¯èŠ‚ç‚¹**: åœ¨ GRUB èœå•æŒ‰ `e`ã€‚
2. **ç¼–è¾‘å‚æ•°**: åœ¨ `linux` è¡Œæœ«å°¾æ·»åŠ  `init=/bin/bash`ã€‚
3. **é‡ç½®**: æŒ‰ `Ctrl+X` å¯åŠ¨åŽæ‰§è¡Œ `mount -o remount,rw /`  `passwd admin`  `reboot -f`ã€‚

### B. Web UI è¿žçº¿ç»´æŠ¤é‡‘å¾‹

åœ¨ GNS3 Web ç•Œé¢è°ƒæ•´æ‹“æ‰‘æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆï¼š
**å­˜ (Save)  åœ (Stop)  æ”¹ (Change)  å¯ (Start)**

> **å­˜**: ç»ˆç«¯æ‰§è¡Œ `sudo config save -y`
> **åœ**: Web UI ç‚¹å‡»çº¢è‰²åœæ­¢æŒ‰é’®
> **æ”¹**: è¿›è¡Œåˆ çº¿ã€æ”¹çº¿æˆ–ç«¯å£è°ƒæ•´æ“ä½œ
> **å¯**: ç‚¹å‡»ç»¿è‰²å¯åŠ¨æŒ‰é’®å¹¶éªŒè¯æŽ¥å£çŠ¶æ€

---

**ðŸ’¡ ç»´æŠ¤å»ºè®®**: å®Œæˆ BGP å®žéªŒé˜¶æ®µæ€§ç›®æ ‡åŽï¼Œé™¤äº†å¤‡ä»½ JSON æ–‡ä»¶ï¼Œå»ºè®®åˆ©ç”¨ GNS3 çš„ **"File -> Export portable project"** æ‰“åŒ…æ•´ä¸ªå·¥ç¨‹ã€‚

